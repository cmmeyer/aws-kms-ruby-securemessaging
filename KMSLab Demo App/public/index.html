<!DOCTYPE html>
<html lang="en">
   <head>
      <meta charset="utf-8">
      <meta content="IE=edge" http-equiv="X-UA-Compatible">
      <meta content="width=device-width, initial-scale=1" name="viewport">
      <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
      <title>Native Key Management</title>
      <!-- Bootstrap -->
      <link href="css/bootstrap.min.css" rel="stylesheet">
      <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
      <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
      <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
      <![endif]-->
   </head>
   <body>
      <div class="container">
         <div class="page-header">
            <h1>5. Native Key Management</h1>
         </div>

         <div id="kmsPanel" class="panel panel-default">
            <div class="panel-heading">
               <h3 class="panel-title">KMS</h3>
            </div>
            <div id="kmsPanelBody" class="panel-body">
               <form class="form-inline" action="" id="kmsMasterKeyForm" method="get" name="kmsMasterKeyForm" onSubmit="setMasterKeyAction();">
                  <div class="form-group">
                     <label for="master-key-alias">Master Key Alias</label>
                     <div class="input-prepend">
                        <span class="add-on">alias/</span>
                        <input class="input-xlarge" id="master-key-alias" name="master-key-alias" value="SecurityDemoKey" type="text" readonly>
                     </div>
                     <p class="help-block">Alias for a Master KMS key</p>
                  </div>

                  <button type="submit" class="btn btn-primary" id="get-master-key" name="get-master-key" autocomplete="off">Get Master Key</button>

               </form>                
            </div>
            <div id="kmsMasterKeyBody" class="panel-body"></div>          
            </div>
         </div>

      <!-- Templates -->
      <script type="text/template" id="tpl-masterkey-list-item">
         <a class="btn btn-primary" href="#masterkeys/<%= key_id %>" role="button"><%= key_id %></a>
      </script>


      <script type="text/template" id="tpl-masterkey-details">
          <div class="form-left-col">
              <label>Id:</label>
              <input type="text" id="masterkeyId" name="key_id" value="<%= key_id %>" disabled />
              <label>Enabled:</label>
              <input type="text" id="enabled" name="enabled" value="<%= enabled %>" required/>
          </div>
          <div class="form-right-col">
              <label>Notes:</label>
              <textarea id="description" name="description"><%= description %></textarea>
          </div>
      </script>

      <script src="js/underscore-min.js"></script>
      <script src="js/jquery-min.js"> </script>
      <script src="js/backbone-min.js"></script>      
      <script src="js/main.js"></script>

      <script>
         function setMasterKeyAction() {
            alert('Got here')
            var alias = $('#master-key-alias').val();
            $(kmsMasterKeyForm).attr('action', "#masterkeys/" + alias);
         }
      </script>

   </body>
</html>